# @package _global_

defaults:
  - override /dataset/templates: encode_lang
  - _self_

dataset:
  train:
    # English
    - frank.A.en:train
    - squad.en:train
    - squad.en:val
    # Danish
    - frank.A.da:train
    - squad.da:train
    - squad.da:val
    # German
    - frank.A.de:train
    - squad.de:train
    - squad.de:val
    # French
    - frank.A.fr:train
    - squad.fr:train
    - squad.fr:val
    # Icelandic
    - frank.A.is:train
    - squad.is:train
    - squad.is:val
  validation:
    - frank.A.en:val
    - frank.A.da:val
    - frank.A.de:val
    - frank.A.fr:val
    - frank.A.is:val
  benchmark:
    # Frank A
    - frank.A.en:val
    - frank.A.da:val
    # Frank B
    - frank.B.en:val
    - frank.B.da:val
    - frank.B.de:val
    - frank.B.fr:val
    - frank.B.is:val

benchmark:
  search:
    faiss:
      factory: IVFauto,Flat
      nprobe: 64

search:
  faiss:
    factory: OPQ32_512,IVFauto,PQ32x8
    metric: inner_product
    nprobe: 64

trainer:
  max_steps: 200_000
  period: 10_000
  val_check_interval: 500
  log_interval: 20
  n_max_eval: 5_000
